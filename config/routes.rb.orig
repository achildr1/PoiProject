GroupDProject1::Application.routes.draw do
  #get "reports/index"
  #get "report/index"
  resources :reports
 
  get "maps/main"
  root 'maps#main'

	namespace :admin do
		resources :interest_points, only: :get
		resources :images, only: :get
		resources :interest_points, :images do
			put 'update_multiple', on: :collection
			put 'approve', 'unapprove', on: :member
		end
	end
	
	namespace :contributor do
		resources :interest_points do
			get 'active', 'pending', on: :collection
		end
	end
	
	# Define polymorphic comments as a concern
	concern :commentable do
		resources :comments
  end

  # Interest Points routes for actions taken for a specific POI instance and nested Comments
	resources :interest_points do
		concerns :commentable
		resources :images
	end  
  
  resources :artists
	
	resources :categories, concerns: :commentable
		
	# Route for account and current user login/logout
	resource :user_session
	resources :users, :roles
	match 'login', to: 'user_sessions#new', via: [:get]
	match 'logout', to: 'user_sessions#destroy', via: [:delete]
	
  get '/auth/:provider/callback', to: 'user_sessions#create'
  get 'auth/failure', to: redirect('/')
  	
 	# Map password reset actions
 	resources :reset_passwords, only: [:new, :create, :edit, :update]

  # Add update action for interest_point_ratings
  resources :interest_point_ratings, only: :update

  # Add update action for comment_ratings
  resources :comment_ratings, only: :update
 
 end