# @markup markdown
# @title Interest Points Application
# @author Group D - Chris Wilson & Ashley Childress 

# Interest Points Application,  Version 0.2.1
## Group D - *Chris Wilson & Ashley Childress*

## Application Overview
This web application provides a central location for users to store interesting places or unique locations, called Interest Points. Users may create a new Interest Point or learn about Interest Points created by others. The home page initially displays a list of all Interest Points currently defined in the application and a map that displays each Interest Point location. 


# Final Project - Report: March 10th, 2014
##### Group D - *Chris Wilson & Ashley Childress*

-----

-----
# Getting Started

* After cloning the *POI Submission*, be sure to run *$ bundle install* to load all gem dependencies.
     * A list of gems used in this project is at the bottom of this page.
     * The *Gemfile.lock* file automatically locks each gem in at its required version needed in this application.
* In a command terminal, navigate to the cloned project and enter *$ rake db:reset* to load all default data.
* In the same terminal, after the reset command completes, run *$ rails s* to start the server.
* The application will be loaded at *http://localhost:3000*
* There are three distinct users, each with different rights in this application:
     1. **Guest** - You do not need to be logged in to have guest privileges; however, using any social media sign in method will automatically create a user with *Guest* rights.
     2. **Contributor** - Click the *login* link in the upper-right corner of the application and log in with the following credentials:
          * User Name: *testcontributor*
          * Password: *Password3*
     3. **Administrator** - Click the *login* link in the upper-right corner of the application and log in with the following credentials:
          * User Name: *achildr1* 
          * Password: *Password1* 
          * or
          * User Name: *cwilso25*
          * Password: *Password2*



# Create your own account
**IMPORTANT NOTE:** You cannot create an administrative user in this application without first having default admin privileges. 

1. Click *login* in the upper-right part of the page
1. Click the *Create Account* link, displayed between the User Name and Password fields and the buttons to log in with social media
1. Fill in all fields, and click *Save User* at the bottom of the page.
1. You will automatically be logged in with **Guest** privileges.
1. To make your account an administrator account, first click *Logout* at the top of the page, and then login with one of the **Administrators*, using credentials listed in the previous section of this page.
1. After logging in, the *Users* link should be visible in the menu bar at the top of the page. Click *Users* to display the *Users Home* page.
1. Find the user in the list who should be an administrator and click the +user name+ to display *User Details*.
1. The *Role* drop-down list should be accessible (if not, make sure you are logged in as an administrator); select *Administrator* and click *Save User* at the bottom of the page.
1. Log out and log back in using the newly added administrator; you should have all rights in this application;

# Information for developers
* All default information for this application is defined in the db/default folder. The db/seeds.rb file is used to read all data from the default files and create database records in this application. Each section in the db/seeds.rb file defines the structure that should be used in the corresponding file.
* You need [MiniTest - Rails](https://github.com/blowmage/minitest-rails) to run the test suite for this application. All test cases are written in Spec format. Call *'$ rake minitest'* before creating a pull request for this application to ensure all tests pass.
* [Simplecov](https://github.com/colszowka/simplecov) is used to determine coverage of all application code. The coverage report is automatically generated when the test suite is ran, and is located at *'coverage/index.html'* in the top-level application folder.
* Documentation for this application is generated using [Yard](http://yardoc.org) and is located at *'doc/index.html'* in the top-level application folder. Simply call *'$ yardoc'* in the application terminal to update application documentation. 
* [Yardstick](https://github.com/dkubb/yardstick) is used to determine whether or not code documentation is adequate and can be generated by calling *'$ rake yardstick' in the application terminal. Results are stored in the *'measurements/yard-output.txt'* file in the top-level folder.
* Additional application measurements were taken using [Reek](https://github.com/troessner/reek) and [Flog](https://github.com/seattlerb/flog). Run in the command terminal using *'$ flog 'app/**/*.rb''* or *'$ reek .'* and results will be automatically stored in the corresponding text file located in the *measurements* folder.
* All application models and the *config/routes.rb* file should be annotated using the [Annotate](https://github.com/ctran/annotate_models) gem. Simply call *'$ annotate'* or *'$ annotate --routes'* in the command terminal to generate these annotations.
* A complete list of gems used in this application is available [here](https://bitbucket.org/achildr1/cs4982-capstone-project-1/wiki/Complete%20list%20of%20gems)

-----

## Application Architecture - Key Functionality

**Maps - Home page**

* By default, a map of all active Interest Points in the application is displayed
* Click any red marker in the map to display details for the corresponding point
     * If the Interest Point has a default image assigned, then it will also be displayed
     * Click *Get Directions* to automatically display directions from your current location to the corresponding interest point
* Click the *POI List* button (located in the upper right corner of the map display) to display a list of all active Interest Points
     * Click *Hide List* to collapse the list and display the full map view again
     * Click the name of any Interest Point in the list to display
     * Change the *Category* in the drop-down list to display only Interest Points for the selected category **WOW!**

-----

** Interest Points

* Click *Interest Points* in the navigation menu to display a list of all Interest Points
     * This is the same list of active points displayed in the list on the Maps Home page, but additional details are added
* Click the name of any Interest Point in the list to display details for that interest point
* The map displayed at the top of the details page is the same as the one on the Maps Home page, except only the current Interest Point is displayed
* To upload a personal image, click the green *Add your image* button, select a file, and then click Upload.
     * The image will automatically be set to pending and will not be displayed for guest users until it has been approved by an administrator
* By default, all approved Images uploaded for the Interest Point are displayed in the image carousel
     * Hover over the image to temporarily stop animations
     * Click any circle link under the carousel to automatically display that image
* Click any of the *share* links, displayed between Interest Point details and the images carousel, to share the page using social media
* Click the Category link to display the corresponding Category Details page
* If you have permission, then links to 'Edit' or 'Delete' are also displayed.
* A list of all comments is displayed at the bottom of the page; however, you cannot add a new comment unless you are logged in;


-----

**Categories & Artists**

* Click *Categories* in the navigation menu to display a list of all Categories and the corresponding details
   * Click the name of any Category in the list to display a list of all Interest Points defined under that category and the corresponding default images, if defined; Click to display the Interest Point Details page
* If the default image for the Interest Point has been approved, then it will be displayed in the list; otherwise, only the interest point name is displayed
* Comments about the entire Category are displayed at the bottom of the Categories page.
     * Users must be signed into the application in order to leave a new comment;
* Click *Artists* in the navigation menu to display a list of all Artists that are currently defined in the application.
     * Click an artist's name to show a list of all Interest Points associated with the artist.

-----

**Account access & management**

* Click *Login* at the top of the page to display the sign in page
     * Enter your username of password and click Login to sign into the application
     * Alternatively, click any social sign-in button to
* To create a new account, simply click the *Create an Account* link
     * Fill in all account details and click save; by default, each new user is added as a Guest and can be upgraded by any application administrator
* If logged in as an administrator, simply click Users at the top of the page to display a list and then click edit for the user to modify
     * To only change the security level, select the appropriate role from the drop-down list and click save;
     * The user will automatically have permissions set in the system the next time they log in (although, they may need to reset cookies in the application)
* If you have forgotten your password (not applicable for social media sign in users), then click the *Forgot Password* link on the 'Login page'
     * Enter the email address associated with the account and click reset password
     * The same success message will be displayed as long as the email address entered is valid, regardless of whether or not it exists for a user record in the application
     * If the email is not associated with a user, then the email they receive will say so
     * Otherwise, the user will receive an email with a link that goes to the 'reset password page' in the application; enter a new password and password confirmation on this page to update the application password for that user;
* Any user is allowed to modify details for their own user account, except for any changes made to their role
     * Click the 'your name's profile' link at the top of the page to display the edit my profile
     * This page can also be used to delete your user account in the application

-----

**Social media**

* Sharing functionality is available on all 'details' pages, including Interest Points, Categories, and Artist.
    * Simply click the share link and select the social media site you want to share the page with, and add any additional information as desired;
     * After sharing, other users can access the page by simply clicking the link
* Click Login to sign into the application as a guest user using a Facebook, Twitter, or Google+ account
     * Social media users are created automatically if you have never used the account to log in
     * Future sign in attempts will load the existing social media user
     * By default, all social media accounts are created with a 'Guest' user role; any administrator can change application rights by accessing the Edit Users page
     * Future work would allow users to request that their role be changed directly in the application

-----

**Editing an Interest Point**

* You must be logged in with a user who has at least contributor privileges (testcontributor or achildr1) to be able to Edit Interest Points
* On the Interest Point Details page, click the 'Edit' link displayed above Interest Point comments;
     * This link is also available on the Interest Points Home page, or from the admin/contributor dashboard pages
* Enter details for the Interest Point directly on the page and click *Save Change* to update the model;
     * Any existing approvals for the Interest Point will be removed after changes are made; updates must be re-approved before the Interest Point will be accessible to regular users in the application.

-----

**Contributor Dashboard**

* Sign in as any user with *contributor* abilities, (testcontributor; Password3), to display the Contributor dashboard
* Any pending Interest Points are displayed in yellow
     * Personal Interest Points that are still pending are also visible to contributors on the Interest Points home page; these are also highlighted in yellow.
* Contributors may modify any information for an Interest Point they have created before it is approved; if any active Interest Point is modified, then it will be subject to re-approval before it is visible in the application;
* Click edit in the contributor dashboard (this is different than the interest points edit link) to show additional contributor features available for the interest point
     * Contributors can select the default image displayed as thumbnails throughout the application on this edit page by simply clicking on the image that should be the default
     * The default image is outlined in red on the edit contributor interest point page
* A list of all active interest points created by the current user is displayed on the Active Interest Points page
     * Like with pending interest points, contributors can modify the default image displayed for an active interest point by clicking the image on the edit page

-----

**Administrator Dashboard**

* Sign into the application as any administrator *(achildr1; Password1)* to view the administrator dashboard
* The number of pending Interest Points and pending Images are displayed in the dashboard
     * Click either link to display a list of all images or interest points
* Click Pending Interest Points to display a list of all interest points; pending ones are highlighted in red
     * Click the edit button to modify details before approving or click the name to display more details
     * Admins can also approve interest points or images individually using the interest point details page
     * Select multiple interest points in the list and click approve/unapprove to complete the action for all selected rows
     * Changes are effective immediately in the application
* Click Pending images to display a list of all images, grouped according to their corresponding interest point
     * A red box is displayed around the default image defined for each Interest Point, if one exists (if not, then the first will be used or no image is displayed)
     * Click any image to update the corresponding default image for the interest point
     * Click approve or unapprove for each image to determine its visibility in the application for other users

-----

## Database schema
* [Download ERD](https://bitbucket.org/achildr1/cs4982-capstone-project-1/downloads/POI_Models_v5_03102014.pdf)
* [View Database Schema](https://bitbucket.org/achildr1/cs4982-capstone-project-1/wiki/Database%20Schema)
-----

## WOW Factor Summary
* Users have the ability to filter the list of Interest Points on the Maps Home page
* Administrator dashboards in the application always show what is pending
     * In addition, the group of all application administrators receive an email when a new Interest Point or Image is pending
     * Administrator approve/unapprove multiple images or interest points at one time
* Password reset ability for all users via email and unique password token *(this is not done using the built in features in Devise; instead, this ability was manually coded in)*
* Dashboards - separate dashboards and controls are available to both contributors and administrators
     * Users can always see the work they need to do, from any page in the application
     * This was not built using the active_admin gem (which is not supported in the version of rails/ruby we are using), so all dashboard functionality was coded by hand
* RBAC access system - the Ability model defines role-based access permissions for different user roles in the application
* Dogecoin donation system - the footer on every page displays a *Donate Dogecoins* link. When clicked on, this link uses a javascript alert to prompt the user to copy our public wallet address in the send portion of
the user's desktop wallet program. This same concept could easily be applied to bitcoin or any other form of cryptocurrency.

-----

## Future work
##### *Functionality missing or not working*

* Users can not currently get directions to an Interest Point using a specific address; instead, the application automatically loads the user's current location on both desktop and mobile devices;
* The ability to *report* or flag an inappropriate Comment is started, and is accessible to administrators on the Reports page; however, currently functionality has not been added in the UI to flag a comment;
*  Artists are not currently linked to a specific User record; future work would allow both models to be linked such that any contributor can create a new Artist and then a new user could claim that person as themselves
     * After the artist record is linked, no other users (except admin) could make changes to their profile
* Roles - the current role set up was not simply hard-coded into the User model so that future work would allow administrators to define security rights dynamically in the application


		
Documentation was generated using [YARD](http://rubydoc.info/gems/yard-rails/0.3.0/frames)


Find our repository at [Bitbucket - CS4982: Capstone Project 1](https://bitbucket.org/achildr1/cs4982-capstone-project-1).
